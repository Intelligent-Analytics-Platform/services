# 开发原则

> 回复请用中文。

## 1. 追求可测试

- 每个模块必须有对应的单元测试，逻辑写在可被独立测试的函数/类中
- 依赖通过参数注入（Repository、Session），不在业务代码内直接创建
- 测试使用内存 SQLite + StaticPool，不依赖真实数据库或外部服务
- 新增端点前先写测试，确保测试覆盖正常路径和错误路径

## 2. 文档即记忆，是团队的共享工具

- OpenAPI 文档是对外契约：每个 schema 必须有 `json_schema_extra.examples`，端点必须有 `summary`
- 代码注释只写"为什么"，不写"是什么"——代码本身说明是什么
- CLAUDE.md 本身就是给 AI 和人类共同使用的上下文，保持简洁、随代码演进更新

## 3. 代码精简，less is more

- 不为假设的未来需求写代码，只解决当下实际问题
- 三行相似代码优于一个过早的抽象
- 删除比添加更需要勇气——无用代码立即删除，不留注释占位
- 依赖库的选择：能用标准库解决的不引入第三方
